meta:
  id: core.action.script
  name: Rhai Script
  category: Logic
  type: Action
  platform: core
  description: "Runs custom Rhai logic for complex transformations."
  version: "1.0.0"

interface:
  inputs:
    - name: Exec
      type: flow

  
  outputs:
    - name: Success
      type: flow


  settings:
    - name: script
      label: Script
      type: textarea
      default: "/* Access variables directly, e.g. http_response */\nreturn 42;"

execution:
  - id: script_exec
    tool: rhai
    params:
      script: "{{ settings.script }}"

    returns:
      result: script_result

  - id: emit_res
    tool: emit
    params:
      port: result
      value: "{{ script_result }}"

  - id: emit_exec
    tool: emit
    params:
      port: Success
